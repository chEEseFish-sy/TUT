# 高德地图 API 配置说明

## 配置完成

已成功配置高德地图 API，可以直接使用 API 进行地理编码和地图显示。

## 配置信息

- **API Key**: `ff6332fa91527b63a12e8b8ce29a0b08`
- **安全密钥**: `e6610c6d2c36c3b0ba116bd58b76fd46`
- **配置文件**: `.env.local`（已在 .gitignore 中，不会提交到代码库）

## 使用方式

### 1. 重启开发服务器

**重要**：环境变量在服务器启动时加载，需要重启开发服务器才能生效。

```bash
# 停止当前服务器（Ctrl+C）
# 然后重新启动
npm run dev
```

### 2. 地图功能

配置完成后，地图组件将：
- ✅ 自动加载高德地图 JS API
- ✅ 使用 API Key 进行地理编码
- ✅ 快速显示地图和位置标记
- ✅ 支持地址自动转换为坐标

### 3. 地址解析

当用户在笔记中输入地址（如 "Paris, France"）时：
1. 地图组件会自动调用高德地图地理编码 API
2. 将地址转换为经纬度坐标
3. 在地图上显示对应位置

## 代码变更

- ✅ 移除了所有 MCP 相关代码
- ✅ 直接使用高德地图 Web API
- ✅ 优化了地理编码逻辑
- ✅ 添加了位置缓存机制（提升加载速度）

## 相关文件

- `.env.local` - 环境变量配置（包含 API Key）
- `components/TripMap.tsx` - 地图组件（已优化）
- `services/locationCache.ts` - 位置缓存服务
- `vite.config.ts` - Vite 配置（支持环境变量）

## 注意事项

1. `.env.local` 文件已添加到 `.gitignore`，不会被提交到代码库
2. API Key 和安全密钥请妥善保管，不要泄露
3. 如果更换 API Key，只需更新 `.env.local` 并重启服务器

